{
    "collab_server" : "",
    "contents" : "---\ntitle: \"p8105_hw2_ym2649.Rmd\"\nauthor: \"Yutian Mu\"\ndate: \"9/30/2017\"\noutput: html_document\n---\n\n#Problem1\n```{r trash_wheel}\nlibrary(readxl)\nlibrary(janitor)\t\nlibrary(tidyverse)\n\ntrash_wheel = read_excel(\"../data/HealthyHarborWaterWheelTotals2017-9-26.xlsx\",range = cell_cols(\"A:N\")) %>%\nclean_names() %>%\nfilter(dumpster !=\"NA\") %>%\nmutate(sports_balls = round(sports_balls, 0)) %>%\nmutate(sports_balls = as.integer(sports_balls))\n\npre16_data= read_excel(\"../data/HealthyHarborWaterWheelTotals2017-9-26.xlsx\",sheet=\"2016 Precipitation\",range=cell_rows(2:15))%>%\nclean_names() %>%\nfilter(month !=\"NA\")%>%\nmutate(year=2016)\n\npre17_data= read_excel(\"../data/HealthyHarborWaterWheelTotals2017-9-26.xlsx\",sheet=\"2017 Precipitation\",range=cell_rows(2:15))%>%\nclean_names() %>%\nfilter(month !=\"NA\")%>%\nfilter(total !=\"NA\")%>%\nmutate(year=2017)\n\npre1617=bind_rows(pre16_data,pre17_data)%>%\nmutate(month = month.name[month])%>%\nselect(year,everything())\n```\n\nThe dataset from Mr. Trash Wheel sheet has `r nrow(trash_wheel)` observations, key variables are `r colnames(trash_wheel)`.\n\nThe dataset combines precipitation data for 2016 and 2017 has `r nrow(pre1617)` observations, key variables are `r colnames(pre1617)`.\n\nThe total precipitation in 2017 is `r sum(pre17_data[[\"total\"]]) `.\n\nThe median number of sports balls in a dumpster in 2016 is `r median(filter(trash_wheel,year==2016)[[\"sports_balls\"]])`.\n\n\n#Problem2\n```{r FiveThirtyEight}\nlibrary(readr) \n\npols_data=read_csv(\"../data/fivethirtyeight_datasets/pols-month.csv\",\ncol_types = \"Diiiiiiii\")%>%\nseparate(col=mon , into = c(\"year\", \"month\", \"day\"), sep = \"-\") %>%\nmutate(year=as.integer(year),month=as.integer(month),day=as.integer(day)) %>%\nmutate(month = month.abb[month])\npols_data$president=ifelse(pols_data$prez_gop==1,yes = 'gop',no = 'dem')\npols_data2=select(pols_data,-prez_dem,-prez_gop) %>%\nselect(-day)\n\nsnp_data=read_csv(\"../data/fivethirtyeight_datasets/snp.csv\",\ncol_types = \"cd\")%>%\nseparate(col = date, into = c(\"day\", \"month\", \"year\"), sep = \"/\")%>%\nmutate(year=as.integer(year),month=as.integer(month),day=as.integer(day))%>%\nmutate(month = month.abb[month])%>%\nselect(year,month,close)%>%\narrange(year,month)\n\nlibrary(Hmisc)\nunemploy=read_csv(\"../data/fivethirtyeight_datasets/unemployment.csv\",col_types=\"idddddddddddd\")%>%\nclean_names()%>%\ngather(key=\"month\",value=\"percentage of unemployment\",jan:dec)%>%\narrange(year,month)\nunemploy1=mutate(unemploy,month=capitalize(unemploy[[\"month\"]]))\n\npols_snp = full_join(pols_data2,snp_data)\ncombine = full_join(pols_snp,unemploy1)\n```\n\nThe dataset pols-month.csv has `r nrow(pols_data)` observations and contains information about the number of national politicians who are democratic or republican at any given time. The dataset snp.csv has `r nrow(snp_data)` observations and contains information about the closing values of the S&P stock index on the associated date. The dataset unemployment.csv has `r nrow(unemploy)` observations and contains information about percentage of unemployment in each month of the associated year.\n\nThe resulting dataset has `r nrow(combine)` observations of `r ncol(combine)` variables.It contains information from 1947-01 to 2015-01, the names of key variables are `r colnames(combine)`.\n\nIn Januarys in or after 1975 in which a democrat was president, the average unemployment rate is `r mean(filter(combine,month==\"Jan\",year >=1975,president==\"dem\")[[\"percentage of unemployment\"]], na.rm = TRUE)`\n \n#Problem 3 \n```{r readin} \ninstacart= read_csv(\"../data/instacart_train_data.csv.zip\",col_types=\"iiiiiciiiiciicc\")\n```\n\nThere are `r nrow(instacart)` entries in the dataset, and there are `r count(unique(instacart[,\"order_id\"]))` unique orders.\n\n```{r hist}\nhist(instacart[[\"order_hour_of_day\"]])\n```\n\n```{r aisle_depart}\naisle_depart=tibble(x=instacart[[\"aisle\"]],y=instacart[[\"department\"]])\ndistinct(aisle_depart,x,y)\n```\nWe can see from the result that there can be different aisles related to the same department.For example, yogurt, other creams cheeses, packaged cheese, specialty cheeses, cream and so on are all related to department dairy eggs.\n\n```{r max_min}\nwhich.max(table(instacart[[\"department\"]]))\nwhich.min(table(instacart[[\"department\"]]))\n```\nFrom department produce are the most items ordered, and from department bulk are the least items ordered.\n\nThe median number of days since the prior order is \n`r median(unique(instacart[[\"days_since_prior_order\"]]))`.\n\nThe median hour of the day at which Pink Lady Apples are ordered is `r median(filter(instacart,product_name==\"Pink Lady Apples\")[[\"order_hour_of_day\"]],na.rm=TRUE)` ,\nand that about Coffee Ice Cream is `r median(filter(instacart,product_name==\"Coffee Ice Cream\")[[\"order_hour_of_day\"]],na.rm=TRUE)`.\n\n\n\n",
    "created" : 1510071497087.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4131294148",
    "id" : "B241786F",
    "lastKnownWriteTime" : 1507144193,
    "last_content_update" : 1507144193,
    "path" : "~/Documents/data_science/p8105_hw2_ym2649/p8105_hw2_ym2649.Rmd",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}